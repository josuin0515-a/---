<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" coã„´ntent="width=device-width, initial-scale=1.0" />
<title>ë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°</title>
<link rel="stylesheet" href="css/style.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  .password-rules { list-style:none; padding:0; margin-top:10px; font-size:14px; }
  .password-rules li { margin:4px 0; transition: color 0.3s; }
  .password-rules li.active { color: green; font-weight:600; }
  .password-strength-bar { width:100%; height:10px; background:#eee; border-radius:10px; margin-top:10px; overflow:hidden; }
  .strength-fill { height:100%; width:0%; background:red; border-radius:10px; transition: width 0.3s, background 0.3s; }

  /* ì¶”ì²œ ë¹„ë°€ë²ˆí˜¸ ë²„íŠ¼ í¬ê¸° í‚¤ìš°ê³  ì™¼ìª½ ì •ë ¬, ì»¨í…Œì´ë„ˆì™€ ê°„ê²© ìœ ì§€ */
  #generator-section { margin-top:15px; padding-left:20px; }
  .generated-passwords button {
    display:block;
    width:250px;
    margin:5px 0;
    padding:8px 12px;
    cursor:pointer;
    border-radius:5px;
    border:1px solid #ccc;
    background:#f5f5f5;
    text-align:left;
  }
  .generated-passwords button:hover {
    background:#667eea;
    color:white;
    border-color:#667eea;
  }

  .btn { padding:5px 15px; border:none; border-radius:5px; cursor:pointer; margin-right:10px; }
  .btn-primary { background:#667eea; color:white; }
  .btn-secondary { background:#ccc; }
  #generate-final { margin-top:20px; background:#4CAF50; color:white; width:150px; }

  .hidden { display:none; }
  #final-message { margin-top:10px; font-weight:bold; color:#4CAF50; font-size:18px; text-align:center; }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>ğŸ” ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°</h1>
    <p class="subtitle">ê°•ë ¥í•˜ê³  ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ë¡œ ê³„ì •ì„ ë³´í˜¸í•˜ì„¸ìš”</p>
  </header>

  <div class="password-checker">

    <!-- ì…ë ¥ì°½ -->
    <div class="password-input-group" style="margin-top:20px;">
      <input type="password" id="password-input" class="password-input" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" oninput="checkPasswordStrength(this.value)" />
      <button type="button" onclick="togglePasswordVisibility()">ğŸ‘ï¸</button>
    </div>

    <!-- ê°•ë„ ë°” -->
    <div class="password-strength-bar">
      <div class="strength-fill" id="strength-fill"></div>
    </div>

    <!-- í”¼ë“œë°± -->
    <div class="password-feedback" id="password-feedback">
      ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì‹œë©´ ê°•ë„ê°€ í‘œì‹œë©ë‹ˆë‹¤.
    </div>

    <!-- ì¶”ì²œ ì—¬ë¶€ ë¬»ê¸° -->
    <div id="generator-prompt" style="margin-top:20px;">
      <p>ì„ì˜ì˜ ëœë¤ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¶”ì²œí•´ ë“œë¦¬ê² ìŠµë‹ˆê¹Œ?</p>
      <button class="btn btn-primary" onclick="showPasswordGenerator()">ì˜ˆ</button>
      <button class="btn btn-secondary" onclick="hidePasswordGenerator()">ì•„ë‹ˆìš”</button>
    </div>

    <!-- ì¶”ì²œ ë¹„ë°€ë²ˆí˜¸ ì˜ì—­ -->
    <div id="generator-section" class="hidden">
      <p>ì¶”ì²œ ë¹„ë°€ë²ˆí˜¸:</p>
      <div class="generated-passwords" id="generated-passwords"></div>
      <button onclick="generatePasswords()" style="margin-top:10px;">ì¶”ì²œ ì¬ìƒì„± ğŸ”„</button>
    </div>

    <!-- ì¡°ê±´ ì²´í¬ -->
    <ul class="password-rules" id="password-rules">
      <li id="rule-length">ğŸ”¸ 8ì ì´ìƒ</li>
      <li id="rule-uppercase">ğŸ”¸ ëŒ€ë¬¸ì í¬í•¨ (A-Z)</li>
      <li id="rule-lowercase">ğŸ”¸ ì†Œë¬¸ì í¬í•¨ (a-z)</li>
      <li id="rule-number">ğŸ”¸ ìˆ«ì í¬í•¨ (0-9)</li>
      <li id="rule-symbol">ğŸ”¸ íŠ¹ìˆ˜ë¬¸ì í¬í•¨ (!@#$%^&* ë“±)</li>
    </ul>

    <!-- ë¹„ë°€ë²ˆí˜¸ ìƒì„± ë²„íŠ¼ -->
    <div style="margin-top:20px;">
      <button id="generate-final" onclick="generateFinalPassword()">ë¹„ë°€ë²ˆí˜¸ ìƒì„±í•˜ê¸°</button>
      <div id="final-message"></div>
    </div>

  </div>
</div>

<script>
function togglePasswordVisibility() {
  const input = document.getElementById("password-input");
  input.type = input.type === "password" ? "text" : "password";
}

function showPasswordGenerator() {
  document.getElementById("generator-section").classList.remove("hidden");
  generatePasswords();
}

function hidePasswordGenerator() {
  document.getElementById("generator-section").classList.add("hidden");
}

function generatePasswords() {
  const passwords = [];
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";
  for(let i=0;i<5;i++){
    let pwd="";
    for(let j=0;j<12;j++){
      pwd += chars.charAt(Math.floor(Math.random()*chars.length));
    }
    passwords.push(pwd);
  }

  const container = document.getElementById("generated-passwords");
  container.innerHTML = "";
  passwords.forEach(pwd => {
    const btn = document.createElement("button");
    btn.textContent = pwd;
    btn.onclick = () => {
      document.getElementById("password-input").value = pwd;
      checkPasswordStrength(pwd);
    };
    container.appendChild(btn);
  });
}

function checkPasswordStrength(password) {
  const rules = {
    length: password.length >= 8,
    uppercase: /[A-Z]/.test(password),
    lowercase: /[a-z]/.test(password),
    number: /[0-9]/.test(password),
    symbol: /[!@#$%^&*(),.?":{}|<>]/.test(password),
  };

  for (const [key, passed] of Object.entries(rules)) {
    const el = document.getElementById("rule-" + key);
    el.classList.toggle("active", passed);
    el.textContent = (passed ? "âœ… " : "ğŸ”¸ ") + el.textContent.replace("âœ… ","").replace("ğŸ”¸ ","");
  }

  const passedCount = Object.values(rules).filter(Boolean).length;
  const fill = document.getElementById("strength-fill");
  const feedback = document.getElementById("password-feedback");
  fill.style.width = (passedCount / 5 * 100) + "%";

  if(passedCount <= 1) { fill.style.background="red"; feedback.textContent="ë§¤ìš° ì•½í•¨ ğŸ˜¢"; }
  else if(passedCount===2) { fill.style.background="orange"; feedback.textContent="ì•½í•¨ ğŸ˜"; }
  else if(passedCount===3) { fill.style.background="gold"; feedback.textContent="ë³´í†µ ğŸ™‚"; }
  else if(passedCount===4) { fill.style.background="limegreen"; feedback.textContent="ê°•í•¨ ğŸ’ª"; }
  else { fill.style.background="green"; feedback.textContent="ë§¤ìš° ê°•í•¨ ğŸ”¥"; }

  return passedCount;
}

// ë¹„ë°€ë²ˆí˜¸ ìƒì„± ë²„íŠ¼ í´ë¦­ ì‹œ ì¡°ê±´ í™•ì¸ í›„ í™”ë©´ ì „í™˜
function generateFinalPassword() {
  const password = document.getElementById("password-input").value;
  const rules = {
    length: password.length >= 8,
    uppercase: /[A-Z]/.test(password),
    lowercase: /[a-z]/.test(password),
    number: /[0-9]/.test(password),
    symbol: /[!@#$%^&*(),.?":{}|<>]/.test(password),
  };

  // 8ìë¦¬ ì´ìƒì´ ë°˜ë“œì‹œ í¬í•¨ë˜ì–´ì•¼ í•˜ë©°, ë‹¤ë¥¸ ì¡°ê±´ 2ê°œ ì´ìƒ ë§Œì¡±í•´ì•¼ í†µê³¼
  if (!rules.length) {
    alert("ë¹„ë°€ë²ˆí˜¸ëŠ” ë°˜ë“œì‹œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
    return;
  }

  const otherPassedCount = Object.values(rules).slice(1).filter(Boolean).length;
  if (otherPassedCount >= 2) {
    const container = document.querySelector('.container');
    container.innerHTML = `
      <div style="display:flex; justify-content:center; align-items:center; height:50vh;">
        <h1 style="color:#4CAF50; font-family: 'Noto Sans KR', sans-serif; text-align:center;">ë¹„ë°€ë²ˆí˜¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</h1>
      </div>
    `;
  } else {
    alert("ë¹„ë°€ë²ˆí˜¸ ì¡°ê±´ì„ 3ê°œ ì´ìƒ ë§Œì¡±í•´ì•¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n(8ìë¦¬ ì´ìƒ í¬í•¨ + ë‹¤ë¥¸ ì¡°ê±´ 2ê°œ ì´ìƒ)");
  }
}
</script>
</body>
</html>
